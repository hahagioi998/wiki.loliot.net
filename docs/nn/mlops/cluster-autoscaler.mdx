---
id: cluster-autoscaler
title: cluster-autoscaler
sidebar_label: cluster-autoscaler
description: cluster-autoscaler
keywords:
  - cluster-autoscaler
---

`cluster-autoscaler`는 디플로이먼트로 배포됩니다. Leader Election을 사용합니다.

## Prerequisites

## AWS

- Auto Scaling 그룹에 아래 태그가 있어야합니다.
  - `k8s.io/cluster-autoscaler/<cluster-name>`: `owned`
  - `k8s.io/cluster-autoscaler/enabled`: `TRUE`

### IAM Policy

아래 Policy가 최소한의 권한이며, 이 권한을 가진 Role을 Kubernetes 서비스 계정에 연결하거나, cluster-autoscaler가 실행 중인 노드에 부여해야 합니다.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Action": [
        "autoscaling:DescribeAutoScalingGroups",
        "autoscaling:DescribeAutoScalingInstances",
        "autoscaling:DescribeLaunchConfigurations",
        "autoscaling:DescribeTags",
        "autoscaling:SetDesiredCapacity",
        "autoscaling:TerminateInstanceInAutoScalingGroup",
        "ec2:DescribeLaunchTemplateVersions"
      ],
      "Resource": "*",
      "Effect": "Allow"
    }
  ]
}
```

## Reference

- [https://docs.aws.amazon.com/eks/latest/userguide/cluster-autoscaler.html](https://docs.aws.amazon.com/eks/latest/userguide/cluster-autoscaler.html)
- [https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler/cloudprovider/aws](https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler/cloudprovider/aws)
- [https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/enable-iam-roles-for-service-accounts.html](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/enable-iam-roles-for-service-accounts.html)
